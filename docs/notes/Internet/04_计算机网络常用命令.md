---
title: 04_计算机网络常用命令
createTime: 2026/02/10 11:09:39
permalink: /notes/Internet/81aiaof8/
---
# fping
ping只可以查单个IP,但Fping可以对整个网段进行探活，非常的方便
```简单示例
fping -agq xx//24
```
## 参数说明
- a(Alive)是之查看存活的机器
- g(Generate)指定扫描某一个CIDR网段
- q(quiet)静默模式，会自动跳过错误的信息(不可达的IP)

# iptables

## 查看目前的iptables表
```
iptables -L -v -n
```
## 设置iptables的黑白名单
```
1.ipset list xx名单
2.ipset add xx名单 xxip或网段 
```

# route -n 详解

| Destination     | Gateway         | Genmask         | Flags | Metric | Ref | Use | Iface          | 备注         |
|-----------------|-----------------|-----------------|-------|--------|-----|-----|----------------|--------------|
| 0.0.0.0         | 58.186.119.193  | 0.0.0.0         | UG    | 0      | 0   | 0   | ens35f1np1     | 默认路由     |
| 10.20.1.16      | 0.0.0.0         | 255.255.255.252 | U     | 0      | 0   | 0   | hcm2jp         |              |
| 10.104.0.0      | 0.0.0.0         | 255.255.255.0   | U     | 0      | 0   | 0   | ens35f0np0     |              |
| 10.104.1.0      | 0.0.0.0         | 255.255.255.0   | U     | 0      | 0   | 0   | ens35f1np1     |              |
| 58.186.119.192  | 0.0.0.0         | 255.255.255.192 | U     | 0      | 0   | 0   | ens35f1np1     |              |
| 172.17.0.0      | 0.0.0.0         | 255.255.0.0     | U     | 0      | 0   | 0   | docker0        | Docker 网络  |

## route -n 所确认的内容
- 基本上只决定本机发出的流量怎么走，也就是单向的。 外部发向本机的流量（incoming traffic）不适用这个路由表来决定“怎么进来”。
	外部主机发包给你的服务器 IP --> 包到达你的网卡（比如 ens35f1np1）--> 内核看目的 IP 是否属于本机（属于 lo、ens35f0np0、ens35f1np1 等接口的 IP）
	--> 如果是本机 IP → 直接上协议栈处理（给本地进程），完全不查路由表来决定“怎么进来”
	--> 进来哪个接口，就从哪个接口进来，由外部路由器/交换机/上游网络决定路径，跟你本机的路由表没关系。
- 当路由表中 Gateway=0.0.0.0; 表明的是 Destination的网段， 本机可以"直接连接"
- 发包时Linux是怎么选路由的？(最长前缀匹配原则)
服务器要发一个包给目标 IP 时，会从最具体的路由（子网掩码最长的）开始匹配，找不到就用默认路由。
- 更具体一点来说的话: Gateway=0.0.0.0的话，内核就从对应的网卡出去ARP找对应的MAC地址，然后单播发送

